{"version":3,"file":"flp-signup.stories-Bi1YsWab.js","sources":["../src/containers/flp-signup/flp-signup.styles.ts","../src/containers/flp-signup/flp-signup.ts"],"sourcesContent":["import { css } from 'lit';\n\nexport const flippico = css`\nflp-button {\n  width: 100%;\n}\nh2 {\n  font-family: var(--flp-font-medium);\n}\n.auth-container {\n  max-width: 450px;\n  width: 100%;\n}\n.mb-small {\n  margin-bottom: 20px;\n}\n.mb-medium {\n  margin-bottom: 40px;\n}\n.text-align-center {\n  text-align: center;\n}\n.forgot-password-link--container {\n  text-align: right;\n  --flp-spacing-medium: 0px;\n}\n.login--button {\n  width: auto;\n}\n.login-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n`;","import { CSSResultGroup, html } from 'lit';\nimport FlpElement from '../../utils/flippico-element';\nimport {customElement, property, state} from 'lit/decorators.js';\nimport \"./../../components/flp-card\";\nimport \"./../../components/flp-button\";\nimport \"./../../components/flp-input\";\nimport \"./../../components/flp-logo\";\nimport \"./../../components/flp-divider\";\nimport { flippico } from './flp-signup.styles';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\n/**\n * @summary This the flp-signup component\n *\n * @tag flp-signup\n */\n @customElement(\"flp-signup\")\nexport class FlpSignup extends FlpElement {\n  static styles: CSSResultGroup = [flippico];\n\n  @property({ type: String, attribute: \"tenant_key\" }) tenantKey = '';\n  @property({ type: String, attribute: \"login_callback\" }) loginCallback = '';\n  @property({ type: String, attribute: \"logout_callback\" }) logoutCallback = '';\n  @property({ type: String, attribute: \"name\" }) name = '';\n  @property({ type: Boolean, attribute: \"staging\" }) staging = false;\n\n  baseUrl = this.staging ? \"https://staging.amadeus.flippi.co\" : \"https://amadeus.flippi.co\";\n\n  @state() loginPending = false;\n\n  onSubmitHandle(event: any) {\n    event.preventDefault();\n    this.loginPending = true;\n    const formData = new FormData(event.target);\n    if (Array.from(formData.values()).some(item => item === '')) {\n      this.loginPending = false;\n      return;\n    }\n    \n    console.log('email', formData.get('email'));\n    console.log('password', formData.get('password'));\n    console.log('name', formData.get('name'));\n    console.log('tenant-key', formData.get('tenant-key'));\n    console.log('login-callback', formData.get('login-callback'));\n    console.log('logout-callback', formData.get('logout-callback'));\n    fetch(`${this.baseUrl}/${formData.get('tenant-key')}/signup`, {\n      method: \"POST\",\n      body: formData,\n    })\n    .then(res => res.json())\n    .then((res) => {\n      window.location.replace(`${this.loginCallback}/${res.message.token}`);\n    })\n    .finally(() => this.loginPending = false);\n  }\n\n  render() {\n    return html`<flp-card class=\"auth-container\">\n      <form @submit=${this.onSubmitHandle}>\n        <div class=\"logo-container text-align-center\">\n          <flp-logo></flp-logo>\n        </div>\n        <h2 class=\"text-align-center\">Create your account</h2>\n        <flp-input class=\"mb-small\"  type=\"text\" required name=\"name\" label=\"Name\"></flp-input>\n        <flp-input class=\"mb-small\"  type=\"email\" required name=\"email\" label=\"Email\"></flp-input>\n        <flp-input class=\"mb-medium\"  name=\"password\" required type=\"password\" label=\"Password\" password-toggle></flp-input>\n        <flp-button \n          class=\"mb-small\" \n          size=\"large\" \n          variant=\"primary\" \n          type=\"submit\" \n          .loading=${ifDefined(this.loginPending)} \n          .disabled=${ifDefined(this.loginPending)}\n        >Signup</flp-button>\n        <div class=\"login-container\">\n          <span>Already have account?</span>\n          <flp-button class=\"login--button\" variant=\"text\" href=${`${this.baseUrl}/${this.tenantKey}/login`}>Login</flp-button>\n        </div>\n      </form>\n    </flp-card>`;\n  }\n}\n"],"names":["flippico","css","FlpSignup","FlpElement","event","formData","item","res","html","ifDefined","__decorateClass","property","state","customElement"],"mappings":"60BAEO,MAAMA,EAAWC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,kMCeX,IAAAC,EAAN,cAAwBC,CAAW,CAAnC,aAAA,CAAA,MAAA,GAAA,SAAA,EAG4D,KAAA,UAAA,GACQ,KAAA,cAAA,GACE,KAAA,eAAA,GACrB,KAAA,KAAA,GACO,KAAA,QAAA,GAEnD,KAAA,QAAA,KAAK,QAAU,oCAAsC,4BAEvC,KAAA,aAAA,EAAA,CAExB,eAAeC,EAAY,CACzBA,EAAM,eAAe,EACrB,KAAK,aAAe,GACpB,MAAMC,EAAW,IAAI,SAASD,EAAM,MAAM,EACtC,GAAA,MAAM,KAAKC,EAAS,OAAQ,CAAA,EAAE,KAAKC,GAAQA,IAAS,EAAE,EAAG,CAC3D,KAAK,aAAe,GACpB,MACF,CAEA,QAAQ,IAAI,QAASD,EAAS,IAAI,OAAO,CAAC,EAC1C,QAAQ,IAAI,WAAYA,EAAS,IAAI,UAAU,CAAC,EAChD,QAAQ,IAAI,OAAQA,EAAS,IAAI,MAAM,CAAC,EACxC,QAAQ,IAAI,aAAcA,EAAS,IAAI,YAAY,CAAC,EACpD,QAAQ,IAAI,iBAAkBA,EAAS,IAAI,gBAAgB,CAAC,EAC5D,QAAQ,IAAI,kBAAmBA,EAAS,IAAI,iBAAiB,CAAC,EACxD,MAAA,GAAG,KAAK,OAAO,IAAIA,EAAS,IAAI,YAAY,CAAC,UAAW,CAC5D,OAAQ,OACR,KAAMA,CAAA,CACP,EACA,KAAYE,GAAAA,EAAI,MAAM,EACtB,KAAMA,GAAQ,CACN,OAAA,SAAS,QAAQ,GAAG,KAAK,aAAa,IAAIA,EAAI,QAAQ,KAAK,EAAE,CACrE,CAAA,EACA,QAAQ,IAAM,KAAK,aAAe,EAAK,CAC1C,CAEA,QAAS,CACA,OAAAC;AAAAA,sBACW,KAAK,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAapBC,EAAU,KAAK,YAAY,CAAC;AAAA,sBAC3BA,EAAU,KAAK,YAAY,CAAC;AAAA;AAAA;AAAA;AAAA,kEAIgB,GAAG,KAAK,OAAO,IAAI,KAAK,SAAS,QAAQ;AAAA;AAAA;AAAA,gBAIzG,CACF,EAhEaP,EACJ,OAAyB,CAACF,CAAQ,EAEYU,EAAA,CAApDC,EAAS,CAAE,KAAM,OAAQ,UAAW,aAAc,CAAA,EAHxCT,EAG0C,UAAA,YAAA,CAAA,EACIQ,EAAA,CAAxDC,EAAS,CAAE,KAAM,OAAQ,UAAW,iBAAkB,CAAA,EAJ5CT,EAI8C,UAAA,gBAAA,CAAA,EACCQ,EAAA,CAAzDC,EAAS,CAAE,KAAM,OAAQ,UAAW,kBAAmB,CAAA,EAL7CT,EAK+C,UAAA,iBAAA,CAAA,EACXQ,EAAA,CAA9CC,EAAS,CAAE,KAAM,OAAQ,UAAW,OAAQ,CAAA,EANlCT,EAMoC,UAAA,OAAA,CAAA,EACIQ,EAAA,CAAlDC,EAAS,CAAE,KAAM,QAAS,UAAW,UAAW,CAAA,EAPtCT,EAOwC,UAAA,UAAA,CAAA,EAI1CQ,EAAA,CAARE,EAAM,CAAA,EAXIV,EAWF,UAAA,eAAA,CAAA,EAXEA,EAANQ,EAAA,CADLG,EAAc,YAAY,CAAA,EACfX,CAAA;;;;;;;;;;;;;;;;;;"}