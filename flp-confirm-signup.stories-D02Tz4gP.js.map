{"version":3,"file":"flp-confirm-signup.stories-D02Tz4gP.js","sources":["../src/containers/flp-confirm-signup/flp-confirm-signup.styles.ts","../src/containers/flp-confirm-signup/flp-confirm-signup.ts"],"sourcesContent":["import { css } from 'lit';\n\nexport const flippico = css`\nflp-button {\n  width: 100%;\n}\n.error {\n  color: var(--flp-color-warning-700);\n}\nh2 {\n  font-family: var(--flp-font-medium);\n}\n.auth-container {\n  max-width: 450px;\n  width: 100%;\n}\n.mb-small {\n  margin-bottom: 20px;\n}\n.mb-medium {\n  margin-bottom: 40px;\n}\n.text-align-center {\n  text-align: center;\n}\n.forgot-password-link--container {\n  text-align: right;\n  --flp-spacing-medium: 0px;\n}\n.login--button {\n  width: auto;\n}\n.login-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n`;","import { CSSResultGroup, html } from 'lit';\nimport FlpElement from '../../utils/flippico-element';\nimport {customElement, property, state} from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { flippico } from './flp-confirm-signup.styles';\nimport { getApiUrl } from '../../utils/get-api-url';\n\n/**\n * @summary This the flp-confirm-signup component\n *\n * @tag flp-confirm-signup\n */\n @customElement(\"flp-confirm-signup\")\nexport class FlpConfirmSignup extends FlpElement {\n  static styles: CSSResultGroup = [flippico];\n\n  @property({ type: String, attribute: \"tenant_key\" }) tenantKey = '';\n  @property({ type: String, attribute: \"token\" }) token = '';\n  @property({ type: String, attribute: \"logo\" }) logo = '';\n  @property({ type: String, attribute: \"success_confirm_url\" }) successConfirmUrl = '';\n  @property({ type: Boolean, attribute: \"staging\" }) staging = false;\n  @property({ type: Boolean, attribute: \"develop\" }) develop = false;\n\n  @state() errorText: null | string;\n  @state() loginPending = false;\n\n  onSubmitHandle(event: any) {\n    event.preventDefault();\n    this.loginPending = true;\n    const formData = new FormData(event.target);\n    if (Array.from(formData.values()).some(item => item === '')) {\n      this.loginPending = false;\n      return;\n    }\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    const urlencoded = new URLSearchParams();\n    urlencoded.append(\"token\", formData.get(\"token\") as string);\n    urlencoded.append(\"code\", formData.get(\"code\") as string);\n    fetch(`${getApiUrl(this.staging, this.develop)}/api/${this.tenantKey}/confirm-account`, {\n      method: \"POST\",\n      headers: myHeaders,\n      body: urlencoded,\n      redirect: \"follow\"\n    })\n    .then(res => res.json())\n    .then((response) => {\n      if (response.code <= 4000) {\n        window.location.href = this.successConfirmUrl;\n        return;\n      }\n      this.errorText = JSON.stringify(response.message.error);\n      event.target.reset();\n    })\n    .finally(() => this.loginPending = false);\n  }\n\n  render() {\n    return html`<flp-card class=\"auth-container\">\n      <form @submit=${this.onSubmitHandle}>\n        <div class=\"logo-container text-align-center\">\n          ${this.logo ? html`<img .src=${this.logo} alt=\"logo\" width=\"150\" height=\"150\" />` : html`<flp-logo></flp-logo>`}\n        </div>\n        <h2 class=\"text-align-center\">Confirm your account</h2>\n        <flp-input class=\"mb-small\" type=\"number\" required min=\"1000\" max=\"9000\" name=\"code\" label=\"Code\"></flp-input>\n        <input type=\"hidden\" value=${this.token} name=\"token\" />\n        <flp-button \n          class=\"mb-small\" \n          size=\"large\" \n          variant=\"primary\" \n          type=\"submit\" \n          .loading=${ifDefined(this.loginPending)} \n          .disabled=${ifDefined(this.loginPending)}\n        >Confirm</flp-button>\n        <div class=\"error\">${this.errorText}</div>\n      </form>\n    </flp-card>`;\n  }\n}\n"],"names":["flippico","css","FlpConfirmSignup","FlpElement","event","formData","item","myHeaders","urlencoded","getApiUrl","res","response","html","ifDefined","__decorateClass","property","state","customElement"],"mappings":"sTAEO,MAAMA,EAAWC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,kMCWX,IAAAC,EAAN,cAA+BC,CAAW,CAA1C,aAAA,CAAA,MAAA,GAAA,SAAA,EAG4D,KAAA,UAAA,GACT,KAAA,MAAA,GACF,KAAA,KAAA,GAC4B,KAAA,kBAAA,GACrB,KAAA,QAAA,GACA,KAAA,QAAA,GAGrC,KAAA,aAAA,EAAA,CAExB,eAAeC,EAAY,CACzBA,EAAM,eAAe,EACrB,KAAK,aAAe,GACpB,MAAMC,EAAW,IAAI,SAASD,EAAM,MAAM,EACtC,GAAA,MAAM,KAAKC,EAAS,OAAQ,CAAA,EAAE,KAAKC,GAAQA,IAAS,EAAE,EAAG,CAC3D,KAAK,aAAe,GACpB,MACF,CACM,MAAAC,EAAY,IAAI,QACZA,EAAA,OAAO,eAAgB,mCAAmC,EAC9D,MAAAC,EAAa,IAAI,gBACvBA,EAAW,OAAO,QAASH,EAAS,IAAI,OAAO,CAAW,EAC1DG,EAAW,OAAO,OAAQH,EAAS,IAAI,MAAM,CAAW,EAClD,MAAA,GAAGI,EAAU,KAAK,QAAS,KAAK,OAAO,CAAC,QAAQ,KAAK,SAAS,mBAAoB,CACtF,OAAQ,OACR,QAASF,EACT,KAAMC,EACN,SAAU,QAAA,CACX,EACA,KAAYE,GAAAA,EAAI,MAAM,EACtB,KAAMC,GAAa,CACd,GAAAA,EAAS,MAAQ,IAAM,CAClB,OAAA,SAAS,KAAO,KAAK,kBAC5B,MACF,CACA,KAAK,UAAY,KAAK,UAAUA,EAAS,QAAQ,KAAK,EACtDP,EAAM,OAAO,OACd,CAAA,EACA,QAAQ,IAAM,KAAK,aAAe,EAAK,CAC1C,CAEA,QAAS,CACA,OAAAQ;AAAAA,sBACW,KAAK,cAAc;AAAA;AAAA,YAE7B,KAAK,KAAOA,cAAiB,KAAK,IAAI,0CAA4CA,wBAA2B;AAAA;AAAA;AAAA;AAAA,qCAIpF,KAAK,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAM1BC,EAAU,KAAK,YAAY,CAAC;AAAA,sBAC3BA,EAAU,KAAK,YAAY,CAAC;AAAA;AAAA,6BAErB,KAAK,SAAS;AAAA;AAAA,gBAGzC,CACF,EAjEaX,EACJ,OAAyB,CAACF,CAAQ,EAEYc,EAAA,CAApDC,EAAS,CAAE,KAAM,OAAQ,UAAW,aAAc,CAAA,EAHxCb,EAG0C,UAAA,YAAA,CAAA,EACLY,EAAA,CAA/CC,EAAS,CAAE,KAAM,OAAQ,UAAW,QAAS,CAAA,EAJnCb,EAIqC,UAAA,QAAA,CAAA,EACDY,EAAA,CAA9CC,EAAS,CAAE,KAAM,OAAQ,UAAW,OAAQ,CAAA,EALlCb,EAKoC,UAAA,OAAA,CAAA,EACeY,EAAA,CAA7DC,EAAS,CAAE,KAAM,OAAQ,UAAW,sBAAuB,CAAA,EANjDb,EAMmD,UAAA,oBAAA,CAAA,EACXY,EAAA,CAAlDC,EAAS,CAAE,KAAM,QAAS,UAAW,UAAW,CAAA,EAPtCb,EAOwC,UAAA,UAAA,CAAA,EACAY,EAAA,CAAlDC,EAAS,CAAE,KAAM,QAAS,UAAW,UAAW,CAAA,EARtCb,EAQwC,UAAA,UAAA,CAAA,EAE1CY,EAAA,CAARE,EAAM,CAAA,EAVId,EAUF,UAAA,YAAA,CAAA,EACAY,EAAA,CAARE,EAAM,CAAA,EAXId,EAWF,UAAA,eAAA,CAAA,EAXEA,EAANY,EAAA,CADLG,EAAc,oBAAoB,CAAA,EACvBf,CAAA;;;;;;;;;;;;;;;;;;"}